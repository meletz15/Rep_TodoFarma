<div class="dashboard-content">
  <div class="content-header">
    <h2 class="welcome-title">¡Bienvenido a TodoFarma!</h2>
    <p class="welcome-subtitle">Sistema de Gestión Farmacéutica Integral</p>
  </div>

  <!-- Estadísticas rápidas -->
  <div class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon users">
            <mat-icon>people</mat-icon>
          </div>
          <div class="stat-info">
            <h3 class="stat-number">
              <span *ngIf="cargandoUsuarios">
                <mat-spinner diameter="24" class="inline-spinner"></mat-spinner>
              </span>
              <span *ngIf="!cargandoUsuarios">{{ formatearNumero(usuariosActivos) }}</span>
            </h3>
            <p class="stat-label">Usuarios Activos</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon products">
            <mat-icon>inventory</mat-icon>
          </div>
          <div class="stat-info">
            <h3 class="stat-number">
              <span *ngIf="cargandoProductos">
                <mat-spinner diameter="24" class="inline-spinner"></mat-spinner>
              </span>
              <span *ngIf="!cargandoProductos">{{ formatearNumero(totalProductos) }}</span>
            </h3>
            <p class="stat-label">Productos</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon sales">
            <mat-icon>point_of_sale</mat-icon>
          </div>
          <div class="stat-info">
            <h3 class="stat-number">
              <span *ngIf="cargandoVentas">
                <mat-spinner diameter="24" class="inline-spinner"></mat-spinner>
              </span>
              <span *ngIf="!cargandoVentas">{{ formatearNumero(ventasHoy) }}</span>
            </h3>
            <p class="stat-label">Ventas Hoy</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon revenue">
            <mat-icon>trending_up</mat-icon>
          </div>
          <div class="stat-info">
            <h3 class="stat-number">
              <span *ngIf="cargandoVentas">
                <mat-spinner diameter="24" class="inline-spinner"></mat-spinner>
              </span>
              <span *ngIf="!cargandoVentas">{{ formatearPrecio(ingresosHoy) }}</span>
            </h3>
            <p class="stat-label">Ingresos del Día</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Productos con Stock Bajo -->
  <div class="info-section">
    <mat-card class="info-card stock-bajo-card">
      <mat-card-header>
        <mat-card-title class="info-title">
          <mat-icon class="warning-icon">warning</mat-icon>
          Productos con Stock Bajo
        </mat-card-title>
        <mat-card-subtitle class="stock-subtitle">
          Se muestran productos con stock ≤ 10 unidades. 
          <strong>Crítico:</strong> Stock en 0 | 
          <strong>Bajo:</strong> Stock de 1 a 5 | 
          <strong>Medio:</strong> Stock de 6 a 10
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="cargandoStockBajo" class="loading-container">
          <mat-spinner diameter="40"></mat-spinner>
          <p class="loading-text">Cargando productos...</p>
        </div>
        
        <div *ngIf="!cargandoStockBajo && productosStockBajo.length === 0" class="empty-state">
          <mat-icon class="empty-icon">check_circle</mat-icon>
          <p class="empty-text">¡Excelente! No hay productos con stock bajo en este momento.</p>
        </div>

        <div *ngIf="!cargandoStockBajo && productosStockBajo.length > 0" class="stock-bajo-list">
          <div class="stock-bajo-header">
            <p class="stock-bajo-count">
              <strong>{{ productosStockBajo.length }}</strong> 
              {{ productosStockBajo.length === 1 ? 'producto requiere' : 'productos requieren' }} atención
            </p>
            <div class="stock-legend">
              <div class="legend-item">
                <span class="legend-badge stock-critico">
                  <mat-icon class="legend-icon">inventory</mat-icon>
                </span>
                <span class="legend-text">Crítico: Stock en 0</span>
              </div>
              <div class="legend-item">
                <span class="legend-badge stock-bajo">
                  <mat-icon class="legend-icon">inventory</mat-icon>
                </span>
                <span class="legend-text">Bajo: Stock de 1 a 5</span>
              </div>
              <div class="legend-item">
                <span class="legend-badge stock-medio">
                  <mat-icon class="legend-icon">inventory</mat-icon>
                </span>
                <span class="legend-text">Medio: Stock de 6 a 10</span>
              </div>
            </div>
          </div>
          <div class="productos-list">
            <div *ngFor="let producto of productosStockBajo" class="producto-item">
              <div class="producto-info">
                <div class="producto-nombre">
                  <mat-icon class="producto-icon">inventory_2</mat-icon>
                  <span class="nombre-text">{{ producto.nombre }}</span>
                </div>
                <div class="producto-details">
                  <span class="producto-sku" *ngIf="producto.sku">SKU: {{ producto.sku }}</span>
                  <span class="producto-categoria" *ngIf="producto.categoria_nombre">{{ producto.categoria_nombre }}</span>
                </div>
              </div>
              <div class="producto-stock">
                <span class="stock-badge" 
                      [ngClass]="{
                        'stock-critico': producto.stock === 0,
                        'stock-bajo': producto.stock > 0 && producto.stock <= 5,
                        'stock-medio': producto.stock > 5 && producto.stock <= 10
                      }">
                  <mat-icon class="stock-icon">inventory</mat-icon>
                  <span class="stock-cantidad">{{ producto.stock || 0 }}</span>
                  <span class="stock-label">unidades</span>
                </span>
              </div>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Información adicional -->
  <div class="info-section">
    <mat-card class="info-card">
      <mat-card-header>
        <mat-card-title class="info-title">
          <mat-icon>info</mat-icon>
          Información del Sistema
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>TodoFarma es tu solución completa para la gestión farmacéutica. 
        Actualmente tienes acceso al módulo de usuarios. Los demás módulos estarán disponibles próximamente.</p>
      </mat-card-content>
    </mat-card>
  </div>
</div>
